<!-- استبدل فقط دالة openModal في ملف index.html بهذا الكود -->
<script>
    function openModal() {
        if(!lastAlchemyResult) return;
        const modal = document.getElementById('superPostModal');
        const content = document.getElementById('superPostContent');
        const sourceGrid = document.getElementById('sourcePosts');
        
        modal.style.display = 'flex';
        content.innerText = lastAlchemyResult.super_post;
        
        let html = "";
        lastAlchemyResult.sources.forEach(s => {
            const isReal = s.is_live === true;
            // اللون الأزرق للبيانات الحقيقية، والداكن للبديلة
            const btnBg = isReal ? "#0055ff" : "#222";
            const btnText = isReal ? "زيارة المنشور المباشر <i class='fas fa-external-link-alt'></i>" : "مسح نبض السوق (X) <i class='fas fa-search'></i>";
            
            html += `
                <div class="source-item" style="border-right: 4px solid ${isReal ? 'var(--neon-blue)' : 'var(--neon-red)'};">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
                        <span style="color:var(--neon-blue); font-weight:900;">@${s.author}</span>
                        <a href="${s.url}" target="_blank" rel="noopener noreferrer" 
                           style="color:#fff; font-size:11px; text-decoration:none; background:${btnBg}; padding:6px 12px; border-radius:6px; font-weight:800; transition:0.3s;">
                            ${btnText}
                        </a>
                    </div>
                    <div style="font-size:11px; opacity:0.8;">${isReal ? 'تفاعل مؤكد: ' + s.engagement : 'تحليل الجينات الاستراتيجية'}</div>
                    <div class="dna-bar"><div class="dna-fill" style="width:${s.score || 90}%"></div></div>
                    <p style="font-size:13px; margin-top:12px; opacity:0.9; line-height:1.5;">${s.text.substring(0,180)}...</p>
                </div>`;
        });
        sourceGrid.innerHTML = html;
    }
</script>
