<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI DOMINATOR | Cyber Dashboard</title>
    <link rel="stylesheet" href="/static/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body>

    <div class="app-container">
        
        <header class="cyber-header">
            <div class="logo-section">
                <h1>AI DOMINATOR <span style="font-size: 0.8rem; color: var(--neon-purple); vertical-align: super;">V8.0</span></h1>
            </div>
            <div class="system-status">
                <div class="status-dot"></div>
                SYSTEM ONLINE
            </div>
        </header>

        <main class="dashboard-grid">
            
            <div class="sidebar">
                <div class="cyber-card">
                    <div class="card-title">
                        <h3><i class="fas fa-fingerprint"></i> Ø¨ØµÙ…Ø© Ø§Ù„Ø£Ø³Ù„ÙˆØ¨</h3>
                        <div class="tech-decor-line"></div>
                    </div>
                    <p style="font-size:0.85rem; color:var(--text-secondary); margin-bottom:10px;">Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ù„Ø§Ø³ØªÙ†Ø³Ø§Ø® Ø§Ù„Ù†Ù…Ø·.</p>
                    <textarea id="sampleText" rows="3" placeholder=">_ Ø§Ù„ØµÙ‚ Ø§Ù„Ù†Øµ Ù‡Ù†Ø§..."></textarea>
                    
                    <button onclick="analyzeStyle()" style="width:100%; margin-top:15px; padding:12px; background:transparent; border:1px solid var(--neon-cyan); color:var(--neon-cyan); border-radius:8px; cursor:pointer; transition:0.3s;" onmouseover="this.style.background='var(--neon-cyan)'; this.style.color='#000'" onmouseout="this.style.background='transparent'; this.style.color='var(--neon-cyan)'">
                        <i class="fas fa-upload"></i> ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                    </button>
                    <div id="styleStatus" style="margin-top:10px; font-size:0.8rem; color:var(--neon-green); font-family:'Courier New'"></div>
                    <input type="hidden" id="styleDNA" value="">
                </div>

                <div class="cyber-card" style="margin-top: 25px;">
                    <div class="card-title">
                        <h3><i class="fas fa-sliders-h"></i> Ù…Ø¹Ù„Ù…Ø§Øª Ø§Ù„ØµÙˆØ±Ø©</h3>
                        <div class="tech-decor-line" style="background: linear-gradient(to right, var(--neon-purple), transparent)"></div>
                    </div>
                    <select id="imageStyle">
                        <option value="Cyberpunk, Neon, Futurism, High Detail">ğŸ”® Ø³Ø§ÙŠØ¨Ø± Ø¨Ø§Ù†Ùƒ (Ù…ÙˆØµÙ‰ Ø¨Ù‡)</option>
                        <option value="Cinematic Photorealistic, 8k, Detailed">ğŸ“¸ ÙˆØ§Ù‚Ø¹ÙŠ Ø³ÙŠÙ†Ù…Ø§Ø¦ÙŠ</option>
                        <option value="3D Render, Unreal Engine Style">ğŸ§Š 3D Ø±ÙŠÙ†Ø¯Ø±</option>
                        <option value="Minimalist Tech Illustration">âœï¸ Ø±Ø³Ù… ØªÙ‚Ù†ÙŠ Ù…Ø¨Ø³Ø·</option>
                    </select>
                </div>
            </div>

            <div class="main-content">
                
                <div class="cyber-card">
                    <div class="card-title">
                        <h3><i class="fas fa-terminal"></i> ÙˆØ­Ø¯Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h3>
                        <div class="tech-decor-line" style="width: 100px;"></div>
                    </div>
                    <textarea id="inputText" rows="3" placeholder=">_ Ø£Ø¯Ø®Ù„ Ø£Ù…Ø± Ø§Ù„Ù…Ù‡Ù…Ø© Ù‡Ù†Ø§... (Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹)"></textarea>
                    
                    <button id="generateBtn" class="cyber-btn-main" onclick="remixContent()">
                        <i class="fas fa-rocket" style="margin-left:10px;"></i> ØªÙ†ÙÙŠØ° Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
                    </button>
                </div>

                <div id="outputSection" style="display: none; margin-top: 30px;">
                    
                    <div id="insightBox" class="cyber-card" style="border-color: var(--neon-purple); display:none; margin-bottom:20px; background-image: linear-gradient(var(--glass-bg), var(--glass-bg)), linear-gradient(135deg, var(--neon-purple), var(--neon-blue));">
                         <h4 style="color:var(--neon-purple); margin:0 0 10px 0;"><i class="fas fa-bug"></i> Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… (Debug Log):</h4>
                         <p id="insightText" style="color:#ff88aa; font-size:0.9rem; font-family:'Courier New'"></p>
                    </div>

                    <div class="output-grid">
                        <div class="image-frame" id="imageContainer"></div>
                        
                        <div class="cyber-card text-frame">
                            <div style="display:flex; justify-content:space-between; margin-bottom:15px; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:10px;">
                                <span style="color:var(--neon-cyan); font-size:0.9rem; font-family:'Courier New'">>_ OUTPUT.TXT</span>
                                <i class="fas fa-copy" style="cursor:pointer; color:var(--neon-cyan);" onclick="copyText()" title="Ù†Ø³Ø®"></i>
                            </div>
                            <div id="resultText"></div>
                        </div>
                    </div>
                </div>

            </div>

        </main>
    </div>

    <script>
        async function analyzeStyle() {
            const text = document.getElementById('sampleText').value;
            const status = document.getElementById('styleStatus');
            status.innerHTML = "INITIALIZING SCAN...";
            try {
                const res = await fetch('/analyze-style', {method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({text})});
                const data = await res.json();
                if(data.style_dna) {
                    document.getElementById('styleDNA').value = data.style_dna;
                    status.innerHTML = "[âœ”] DNA DATA ACQUIRED";
                }
            } catch(e) { status.innerText = "ERROR"; }
        }

        async function remixContent() {
            const text = document.getElementById('inputText').value;
            const style = document.getElementById('styleDNA').value;
            const imageStyle = document.getElementById('imageStyle').value;
            const btn = document.getElementById('generateBtn');

            if(!text) return alert("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!");
            
            btn.innerHTML = '<i class="fas fa-microchip fa-spin"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...';
            btn.disabled = true;
            document.getElementById('outputSection').style.display = 'block';
            document.getElementById('resultText').innerHTML = '<div class="loader-ui">>_ PROCESSING TEXT DATA...</div>';
            document.getElementById('imageContainer').innerHTML = '<div class="loader-ui"><i class="fas fa-circle-notch fa-spin"></i><br>>_ RENDERING IMAGE...</div>';

            try {
                const res = await fetch('/generate', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({text: text, style: style, image_style: imageStyle})
                });
                const data = await res.json();

                if(!data.error) {
                    document.getElementById('resultText').innerHTML = data.result.replace(/\n/g, '<br>');
                    if(data.debug) {
                        document.getElementById('insightBox').style.display = 'block';
                        document.getElementById('insightText').innerText = data.debug;
                    }
                    
                    const img = new Image();
                    img.src = `https://image.pollinations.ai/prompt/${encodeURIComponent(data.image_prompt)}?nologin=true&width=1024&height=1024&model=flux&seed=${Math.random()}`;
                    img.onload = () => { document.getElementById('imageContainer').innerHTML = ''; document.getElementById('imageContainer').appendChild(img); };
                }
            } catch(e) { document.getElementById('resultText').innerText = "SYSTEM FAILURE"; }
            
            btn.innerHTML = '<i class="fas fa-rocket" style="margin-left:10px;"></i> ØªÙ†ÙÙŠØ° Ø§Ù„Ø¹Ù…Ù„ÙŠØ©';
            btn.disabled = false;
        }

        function copyText() { navigator.clipboard.writeText(document.getElementById('resultText').innerText); alert("ØªÙ… Ø§Ù„Ù†Ø³Ø®!"); }
    </script>
</body>
</html>
