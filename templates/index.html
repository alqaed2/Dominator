<!-- استبدل فقط دالة openAlchemyModal داخل ملف index.html -->
    function openAlchemyModal() {
        if(!lastAlchemyResult) return;
        const modal = document.getElementById('superPostModal');
        const content = document.getElementById('superPostContent');
        const sourceGrid = document.getElementById('sourcePosts');
        
        modal.style.display = 'flex';
        content.innerText = lastAlchemyResult.super_post;
        
        // بناء شبكة الجينات مع ضمان امتلاء البيانات
        let html = "";
        const sources = lastAlchemyResult.sources || [];
        sources.forEach(s => {
            html += `
                <div class="source-item" style="border-left: 3px solid var(--neon-red); background: rgba(255,255,255,0.01);">
                    <div style="color:var(--neon-blue); font-weight:800; margin-bottom:8px;">
                        <i class="fas fa-chart-line"></i> ${s.engagement || 'متفاعل جداً'}
                    </div>
                    <p style="margin:0; font-size:12px; opacity:0.85;">${s.text ? s.text.substring(0,130) : 'جاري تحليل الحمض النووي لهذا المنشور...'}...</p>
                </div>`;
        });
        sourceGrid.innerHTML = html;
    }
