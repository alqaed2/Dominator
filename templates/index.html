<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Dominator | Pro Interface</title>
    <link rel="stylesheet" href="/static/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body>

    <div class="app-container">
        
        <header class="glass-header">
            <h1 class="logo-text"><span class="version-tag">V7.0 PRO</span> AI DOMINATOR</h1>
            <p style="color: #666; margin-top: 10px;">Ù†Ø¸Ø§Ù… ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ÙˆØªØµÙ…ÙŠÙ… Ø§Ù„Ø¬Ø±Ø§ÙÙŠÙƒ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„</p>
        </header>

        <main class="grid-system">
            
            <div class="sidebar">
                <div class="spotlight-card" onmousemove="moveGlow(event)">
                    <div class="card-content">
                        <h3><i class="fas fa-fingerprint"></i> Ø¨ØµÙ…Ø© Ø§Ù„Ø£Ø³Ù„ÙˆØ¨</h3>
                        <p style="font-size:0.85rem; color:#666; margin-bottom:10px;">Ø§Ù†Ø³Ø® Ù†ØµØ§Ù‹ Ø³Ø§Ø¨Ù‚Ø§Ù‹ Ù„ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¹Ù„Ù‰ Ø£Ø³Ù„ÙˆØ¨Ùƒ.</p>
                        <textarea id="sampleText" rows="3" placeholder="Ø§Ù„ØµÙ‚ Ø§Ù„Ù†Øµ Ù‡Ù†Ø§..."></textarea>
                        <button class="action-btn" style="background:#222; color:#fff; padding:12px; font-size:0.9rem;" onclick="analyzeStyle()">
                            <i class="fas fa-dna"></i> ØªØ­Ù„ÙŠÙ„ ÙˆØªÙØ¹ÙŠÙ„
                        </button>
                        <div id="styleStatus" style="margin-top:10px; font-size:0.8rem; color:var(--neon-green)"></div>
                        <input type="hidden" id="styleDNA" value="">
                    </div>
                </div>

                <div class="spotlight-card" style="margin-top: 20px;" onmousemove="moveGlow(event)">
                    <div class="card-content">
                        <h3><i class="fas fa-palette"></i> Ø§Ù„Ù†Ù…Ø· Ø§Ù„ÙÙ†ÙŠ</h3>
                        <select id="imageStyle">
                            <option value="Cinematic Photorealistic, 8k">ğŸ“¸ ÙˆØ§Ù‚Ø¹ÙŠ (Cinematic)</option>
                            <option value="Cyberpunk, Neon, Futurism">ğŸ”® Ø³Ø§ÙŠØ¨Ø± Ø¨Ø§Ù†Ùƒ (Cyberpunk)</option>
                            <option value="3D Pixar Style, Cute">ğŸ§¸ ÙƒØ±ØªÙˆÙ† (3D Render)</option>
                            <option value="Minimalist Vector Art">âœï¸ Ø±Ø³Ù… Ø®Ø·ÙŠ (Minimalist)</option>
                            <option value="Luxury Gold, Elegant">ğŸ‘‘ ÙØ®Ø§Ù…Ø© (Luxury)</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="main-content">
                
                <div class="spotlight-card" onmousemove="moveGlow(event)">
                    <div class="card-content">
                        <h3><i class="fas fa-magic"></i> ØºØ±ÙØ© Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹</h3>
                        <textarea id="inputText" rows="2" placeholder="Ø§ÙƒØªØ¨ ÙÙƒØ±ØªÙƒ Ù‡Ù†Ø§... (Ù…Ø«Ø§Ù„: Ù…Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„ØªØ¹Ù„ÙŠÙ… ÙÙŠ 2030)"></textarea>
                        <button id="generateBtn" class="action-btn" onclick="remixContent()">
                            Ø¥Ø·Ù„Ø§Ù‚ Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ <i class="fas fa-rocket"></i>
                        </button>
                    </div>
                </div>

                <div id="outputSection" style="display: none; margin-top: 30px;">
                    
                    <div id="insightBox" class="spotlight-card" style="border-color: rgba(255,0,85,0.3); display:none; margin-bottom:20px;">
                         <p id="insightText" style="color:#ff88aa; font-size:0.9rem;"></p>
                    </div>

                    <div class="output-grid">
                        <div class="image-preview" id="imageContainer"></div>
                        
                        <div class="spotlight-card" style="padding: 20px;" onmousemove="moveGlow(event)">
                            <div class="card-content">
                                <div style="display:flex; justify-content:space-between; margin-bottom:15px;">
                                    <span style="color:#666; font-size:0.8rem;">GENERATED CONTENT</span>
                                    <i class="fas fa-copy" style="cursor:pointer; color:#fff;" onclick="copyText()"></i>
                                </div>
                                <div id="resultText" class="result-text-area"></div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </main>
    </div>

    <script>
        // --- Ø§Ù„Ø³Ø­Ø± Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ: Ø¯Ø§Ù„Ø© ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ø¥Ø¶Ø§Ø¡Ø© Ø¨Ø¯ÙˆÙ† ØªØ´ÙˆÙŠÙ‡ ---
        function moveGlow(e) {
            const card = e.currentTarget;
            const rect = card.getBoundingClientRect();
            const x = e.clientX - rect.left; // Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø§ÙˆØ³ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©
            const y = e.clientY - rect.top;
            
            // Ù†Ø­Ø¯Ø« Ù…ØªØºÙŠØ±Ø§Øª CSS Ù„ÙŠØªØ­Ø±Ùƒ Ø§Ù„Ø¶ÙˆØ¡
            card.style.setProperty('--x', `${x}px`);
            card.style.setProperty('--y', `${y}px`);
        }

        // --- Ø¯ÙˆØ§Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… (ÙƒÙ…Ø§ Ù‡ÙŠ) ---
        async function analyzeStyle() {
            const text = document.getElementById('sampleText').value;
            const status = document.getElementById('styleStatus');
            status.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„...";
            try {
                const res = await fetch('/analyze-style', {method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({text})});
                const data = await res.json();
                if(data.style_dna) {
                    document.getElementById('styleDNA').value = data.style_dna;
                    status.innerText = "âœ” ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø£Ø³Ù„ÙˆØ¨";
                }
            } catch(e) { status.innerText = "Ø®Ø·Ø£"; }
        }

        async function remixContent() {
            const text = document.getElementById('inputText').value;
            const style = document.getElementById('styleDNA').value;
            const imageStyle = document.getElementById('imageStyle').value;
            const btn = document.getElementById('generateBtn');

            if(!text) return alert("Ø§ÙƒØªØ¨ ÙÙƒØ±Ø©!");
            
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...';
            btn.disabled = true;
            document.getElementById('outputSection').style.display = 'block';
            document.getElementById('resultText').innerHTML = '<div class="loader-ui">Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙƒØªØ§Ø¨Ø©...</div>';
            document.getElementById('imageContainer').innerHTML = '<div class="loader-ui"><i class="fas fa-circle-notch fa-spin"></i><br>Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±Ø³Ù…...</div>';

            try {
                const res = await fetch('/generate', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({text: text, style: style, image_style: imageStyle})
                });
                const data = await res.json();

                if(!data.error) {
                    document.getElementById('resultText').innerHTML = data.result.replace(/\n/g, '<br>');
                    if(data.debug) {
                        document.getElementById('insightBox').style.display = 'block';
                        document.getElementById('insightText').innerText = "ğŸ’¡ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ù†Ø§Ù‚Ø¯: " + data.debug;
                    }
                    
                    const img = new Image();
                    img.src = `https://image.pollinations.ai/prompt/${encodeURIComponent(data.image_prompt)}?nologin=true&width=1024&height=1024&model=flux&seed=${Math.random()}`;
                    img.onload = () => { document.getElementById('imageContainer').innerHTML = ''; document.getElementById('imageContainer').appendChild(img); };
                }
            } catch(e) { document.getElementById('resultText').innerText = "Ø­Ø¯Ø« Ø®Ø·Ø£"; }
            
            btn.innerHTML = 'Ø¥Ø·Ù„Ø§Ù‚ Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ <i class="fas fa-rocket"></i>';
            btn.disabled = false;
        }

        function copyText() { navigator.clipboard.writeText(document.getElementById('resultText').innerText); alert("ØªÙ… Ø§Ù„Ù†Ø³Ø®!"); }
    </script>
</body>
</html>
