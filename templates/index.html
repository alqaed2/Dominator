<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Dominator | ØºØ±ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø°ÙƒÙŠØ©</title>
    <link rel="stylesheet" href="/static/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <h1>AI Content <span class="highlight">Dominator</span> <span style="font-size:0.5em; vertical-align: super; color: #ff0055;">2.0</span></h1>
            <p class="subtitle">Ù†Ø¸Ø§Ù… Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…Ø±ÙƒØ¨ (Multi-Agent) Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø£ÙÙƒØ§Ø± Ø¥Ù„Ù‰ Ù…Ø­ØªÙˆÙ‰ ÙÙŠØ±ÙˆØ³ÙŠ.</p>
        </header>

        <main>
            <div class="input-section">
                <textarea id="inputText" placeholder="Ø¹Ù† Ù…Ø§Ø°Ø§ ØªØ±ÙŠØ¯ Ø£Ù† ØªØªØ­Ø¯Ø« Ø§Ù„ÙŠÙˆÙ…ØŸ (Ù…Ø«Ø§Ù„: Ù…Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„ØªØ¬Ø§Ø±Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© ÙÙŠ Ø§Ù„ÙŠÙ…Ù†...)"></textarea>
                <button id="generateBtn" onclick="remixContent()">âš¡ ØªÙØ¹ÙŠÙ„ ØºØ±ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª (Deploy Agents)</button>
            </div>

            <div class="output-section" id="outputSection" style="display: none;">
                
                <div class="insight-box" id="insightBox">
                    <h4>ğŸ§ ØªÙ‚Ø±ÙŠØ± "Ø§Ù„Ù†Ø§Ù‚Ø¯ Ø§Ù„Ø°ÙƒÙŠ" (Analysis):</h4>
                    <p id="insightText"></p>
                </div>

                <h3>âœ¨ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©:</h3>
                <div class="result-box" id="resultText"></div>
                
                <div class="actions">
                    <button class="copy-btn" onclick="copyText()">Ù†Ø³Ø® Ø§Ù„Ù†Øµ</button>
                    <button class="retry-btn" onclick="remixContent()">Ù…Ø­Ø§ÙˆÙ„Ø© Ø£Ø®Ø±Ù‰ â†»</button>
                </div>
            </div>
        </main>

        <footer>
            <p>Powered by <strong>Advanced Agentic AI</strong> Â© 2025</p>
        </footer>
    </div>

    <script>
        async function remixContent() {
            const text = document.getElementById('inputText').value;
            const btn = document.getElementById('generateBtn');
            const resultBox = document.getElementById('resultText');
            const insightBox = document.getElementById('insightBox');
            const insightText = document.getElementById('insightText');
            const outputSection = document.getElementById('outputSection');

            if(!text) return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙÙƒØ±Ø© Ù„Ù„Ù†Ø¸Ø§Ù…!");

            // ØªØ£Ø«ÙŠØ± Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ
            btn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ø£Ø°ÙƒÙŠØ§Ø¡...";
            btn.disabled = true;
            resultBox.innerHTML = '<div class="loader"></div>';
            insightBox.style.display = 'none'; // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ù…Ø¤Ù‚ØªØ§Ù‹
            outputSection.style.display = 'block';

            try {
                const response = await fetch('/generate', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({text: text})
                });
                const data = await response.json();

                if(data.error) {
                    resultBox.innerText = "Ø®Ø·Ø£: " + data.error;
                } else {
                    // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©
                    resultBox.innerHTML = data.result.replace(/\n/g, '<br>');
                    
                    // Ø¹Ø±Ø¶ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù†Ø§Ù‚Ø¯ Ø¥Ø°Ø§ ÙˆØ¬Ø¯
                    if(data.debug) {
                        insightBox.style.display = 'block';
                        insightText.innerText = data.debug;
                    }
                }
            } catch (err) {
                resultBox.innerText = "ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±. ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.";
            }

            btn.innerText = "âš¡ ØªÙØ¹ÙŠÙ„ ØºØ±ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª (Deploy Agents)";
            btn.disabled = false;
        }

        function copyText() {
            const text = document.getElementById('resultText').innerText;
            navigator.clipboard.writeText(text);
            alert("ØªÙ… Ø§Ù„Ù†Ø³Ø®! Ø¬Ø§Ù‡Ø² Ù„Ù„Ø³ÙŠØ·Ø±Ø©.");
        }
    </script>
</body>
</html>
